{{- if .Values.credentials }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "azure-metrics-exporter.fullname" . }}
  labels:
    {{- include "azure-metrics-exporter.labels" . | nindent 4 }}
data:
  azure.yml: |-
    credentials:
    {{- toYaml .Values.credentials | nindent 6 }}
    {{- toYaml .Values.config | nindent 4 }}
{{- else }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "azure-metrics-exporter.fullname" . }}
  labels:
    {{- include "azure-metrics-exporter.labels" . | nindent 4 }}
data:
  azure.yml: |-
    credentials:
      subscription_id: {{ .Values.subscriptionId }}
    {{- toYaml .Values.config | nindent 4 }}
{{ end }}